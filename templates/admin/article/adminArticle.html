<template name="AdminArticlesDashboard">
	{{>AdminHeader header="Article Dashboard"}}
	{{>StatusModal}}
	<div class="row">
		<div class="col s4">
			<ul class="collection card">
				<li class="collection-item"><a href="{{pathFor 'AdminArticleAdd'}}">Add Article</a></li>
				<li class="collection-item"><a href="{{pathFor 'AdminArticlesList'}}">Articles List</a></li>
				<li class="collection-item"><a href="{{pathFor 'AdminAdvanceArticles'}}">Advance Articles</a></li>
			</ul>
			{{#with journal}}
			{{#if equals short_name 'oncotarget'}}
			<br><br>
			<button id="ojs-batch-update" class="blue-grey darken-1 waves-effect waves-light btn">Batch Update Via OJS</button>
			{{/if}}
			{{/with}}
		</div>
		<div class="col s4">
			<div class="card">
				<div class="card-content">
					<h4>DOI</h4>
					<h5>{{MissingDoiCount}} Papers Without DOI Saved</h5>
					<button id="doi-register-check" class="btn">DOI Registered Check</button>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col s12 m4">
			<div class="card">
				<div class="card-content">
					<h5>Feature Articles</h5>
					<div class="row">
						<div class="col s12">
							<ul class="collection">
							{{#each feature}}
								<li class="collection-item"><h6>{{{title}}}</h6><p><a href="{{pathFor 'AdminArticle'}}">View</a></p></li>
							{{/each}}
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col s4">
			<div class="card">
				<div class="card-content">
					<h5>Advance Articles</h5>
					<div class="row">
						<div class="col s12">
							<ul class="collection">
							{{#each advance}}
								<li class="collection-item"><h6>{{{title}}}</h6><p><a href="{{pathFor 'AdminArticle'}}">View</a></p></li>
							{{/each}}
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="AdminArticlesList">
	{{>AdminHeader header="Articles"}}
	<div class="row">
		<div class="col s12">
			{{> reactiveTable collection=articles settings=settings}}
		</div>
	</div>
</template>

<template name="AdminArticleOverview">
	{{>StatusModal}}
	{{#with article}}
	<div class="row">
		<div class="col s12">
			<a href="{{pathFor 'AdminArticle'}}" class="btn btn-edit"><i class="material-icons">&#xE3C9;</i> Edit</a>
		</div>
	</div>
	{{>ArticleHeaderTitle}}
	<div class="row">
		<div class="col s12">
			<h3>{{>AuthorsRefList}}</h3>
		</div>
	</div>
	{{#if countKeys ids}}
	<div class="row">
		<div class="col s12">
			<h5>IDs:</h5>
			{{#each arrayify ids}}
				{{#if equals name 'doi'}}
				<div class="col s4"><h6><label>{{name}}:</label> <a href="{{value}}">{{prettyDoi value}}</a></h6></div>
				{{else}}
				<div class="col s4"><h6><label>{{name}}:</label> {{value}}</h6></div>
				{{/if}}
			{{/each}}
		</div>
	</div>
	{{/if}}

	{{#if countKeys dates}}
	<div class="row">
		<div class="col s12">
			<h5>Dates:</h5>
			{{#each arrayify dates}}
				{{#if equals name 'collection'}}
					<h6><label>{{name}}:</label> {{collectionDate value}}</h6>
					{{else}}
					<h6><label>{{name}}:</label> {{articleDate value}}</h6>
				{{/if}}
			{{/each}}
		</div>
	</div>
	{{/if}}

	{{#if countKeys history}}
	<div class="row">
		<div class="col s12">
			<h5>History:</h5>
			{{#each arrayify history}}
			<h6><label>{{name}}:</label> {{articleDate value}}</h6>
			{{/each}}
		</div>
	</div>
	{{/if}}

	{{#if keywords}}
	<div class="row">
		<div class="col s12">
			<h5>Keywords:</h5>
			<ul>
				{{#each keywords}}
				<li><h6>{{.}}</h6></li>
				{{/each}}
			</ul>
		</div>
	</div>
	{{/if}}
	{{/with}}

	{{>AdminArticleAssets article=article assets=assets}}
</template>

<template name="AdminAop">
	{{>AdminHeader header="AOP"}}
	<div class="row">
		<div class="col s12">
			{{> reactiveTable collection=articles settings=settings}}
		</div>
	</div>
</template>

<template name="AdminArticleAssets">
	<div class="row">
		<div class="col s12">
			<div class="card blue-grey lighten-4">
				<div class="card-content">
					<form id="assets-form">
					{{#with article}}
					<input type="hidden" id="article-mongo-id" data-id="{{_id}}"/>
					{{/with}}
					<span class="card-title">Assets</span>
					<div class="row">
						<div class="col s12 m6">
							<div class="card z-depth-0 blue-grey lighten-5">
								<div class="card-content">
									<div class="card-title">XML</div>
									{{#with assets}}
									{{#with xml}}
									{{#if url}}
										<div class="row">
											<div class="col s12 m6">
												<a class="btn" href="{{url}}" target="_BLANK"><i class="material-icons">&#xE2C4;</i> XML</a>
											</div>
											<div class="col s12 m6">
												<input type="checkbox" id="display-xml" checked="{{checked settings.display}}"/>
												<label for="display-xml">Display XML</label>
											</div>
										</div>
									{{else}}
									<h5>No XML</h5>
									{{/if}}
									{{/with}}
									{{/with}}
								</div>
							</div>
						</div>
						<div class="col s12 m6">
							<div class="card z-depth-0 blue-grey lighten-5">
								<div class="card-content">
									<div class="card-title">PDF</div>
									{{#with assets}}
									{{#with pdf}}
									{{#if url}}
										<div class="row">
											<div class="col s12 m6">
												<a class="btn" href="{{url}}" target="_BLANK"><i class="material-icons">&#xE2C4;</i> PDF</a>
											</div>
											<div class="col s12 m6">
												<input type="checkbox" id="display-pdf" checked="{{checked settings.display}}"/>
												<label for="display-pdf">Display PDF</label>
											</div>
										</div>
									{{else}}
									<h5>No PDF</h5>
									{{/if}}
									{{/with}}
									{{/with}}
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col s12 center-align">
						{{>SaveBtn}}
						</div>
					</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	{{#with article}}
	<div class="row">
		<div class="col s12">
			<div class="card blue-grey lighten-4">
				<div class="card-content">
					<span class="card-title">Uploader</span>
					<div class="row">
						<div class="col s12 offset-m4 m4">
							<div class="card z-depth-0 blue-grey lighten-5">
								<div class="card-content">
									<div class="card-title">XML &amp; PDF</div>
									{{>s3Upload}}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	{{/with}}
</template>