<template name="Article">
    <div class="row">
        {{> LeftNav}}
        <div class="col s10">
            {{> SubscribeModal}}
            {{#with article}}
            <h5><a href="/issue/v{{volume}}i{{issue}}">Volume {{volume}}, Issue {{issue}}</a></h5>
            {{/with}}
            <div class="card">
                <div class="card-content">
                {{#with article}}
                    <div class="row">
                        <div class="col s12">
                            {{>ArticleMeta}}
                        </div>
                    </div>
                    {{#if abstract}}
                    <div class="row">
                        <div class="col s12">
                            {{{abstract}}}
                        </div>
                    </div>
                    {{/if}}
                    <div class="row">
                        <div class="col s12">
                            {{>ArticleButtons}}
                        </div>
                    </div>
                {{/with}}

                {{#if assets.figures}}
                <div class="row">
                    <div class="col s12">
                        <h3>Figures</h3>
                        {{>ArticleFigures figures=assets.figures}}
                    </div>
                </div>
                {{/if}}
                </div>
            </div>

            {{#with article}}
            {{#if keywords}}
            {{#each keywords}}
            <a class="btn waves-effect waves-light kw deep-orange lighten-2">{{{.}}}</a>
            {{/each}}
            {{/if}}
            {{/with}}
        </div>
    </div>
</template>


<template name="ArticleText">
    {{#with article}}
        {{>ArticleMeta}}
        {{#if ids.pii}}
        {{else}}
        <div class="row">
            <div class="col s12 red center-align"><h4>Full Text Unavailable.</h4></div>
        </div>

        {{/if}}
    {{/with}}


    {{#if fullText}}
    {{else}}
        <div class="row">
            <div class="col s12">
                <h3>Loading</h3>
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>
            </div>
        </div>
    {{/if}}

    {{#with fullText}}
        {{#each sections}}
            <h3>{{{title}}}</h3>
            {{#each content}}
                <p>{{{.}}}</p>
            {{/each}}
        {{/each}}

        {{#if references}}
            <h3>References</h3>
            <ul>
                {{#each references}}
                    <li id="R{{number}}"><b>{{number}}.</b>{{#if article_title}} {{article_title}}.{{/if}}{{#if source}} {{source}}.{{/if}}{{#if year}} {{year}}{{/if}}{{#if volume}}; {{volume}}{{/if}}{{#if fpage}}: {{fpage}}{{/if}}{{#if lpage}}-{{lpage}}{{/if}}.</li>
                {{/each}}
            </ul>

        {{/if}}
    {{/with}}

</template>
